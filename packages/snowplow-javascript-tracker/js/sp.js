/*
 * SnowPlow - The world's most powerful web analytics platform
 *
 * @description JavaScript tracking client for SnowPlow
 * @version 0.7.0
 * @author Alex Dean, Simon Andersson, Anthon Pang
 */
if(!this.JSON2){this.JSON2={}}(function(){function d(f){return f<10?"0"+f:f}function l(n,m){var f=Object.prototype.toString.apply(n);if(f==="[object Date]"){return isFinite(n.valueOf())?n.getUTCFullYear()+"-"+d(n.getUTCMonth()+1)+"-"+d(n.getUTCDate())+"T"+d(n.getUTCHours())+":"+d(n.getUTCMinutes())+":"+d(n.getUTCSeconds())+"Z":null}if(f==="[object String]"||f==="[object Number]"||f==="[object Boolean]"){return n.valueOf()}if(f!=="[object Array]"&&typeof n.toJSON==="function"){return n.toJSON(m)}return n}var c=new RegExp("[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]","g"),e='\\\\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]',i=new RegExp("["+e,"g"),j,b,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;
function a(f){i.lastIndex=0;return i.test(f)?'"'+f.replace(i,function(m){var n=k[m];return typeof n==="string"?n:"\\u"+("0000"+m.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function g(s,p){var n,m,t,f,q=j,o,r=p[s];if(r&&typeof r==="object"){r=l(r,s)}if(typeof h==="function"){r=h.call(p,s,r)}switch(typeof r){case"string":return a(r);case"number":return isFinite(r)?String(r):"null";case"boolean":case"null":return String(r);case"object":if(!r){return"null"}j+=b;o=[];if(Object.prototype.toString.apply(r)==="[object Array]"){f=r.length;for(n=0;n<f;n+=1){o[n]=g(n,r)||"null"}t=o.length===0?"[]":j?"[\n"+j+o.join(",\n"+j)+"\n"+q+"]":"["+o.join(",")+"]";j=q;return t}if(h&&typeof h==="object"){f=h.length;for(n=0;n<f;n+=1){if(typeof h[n]==="string"){m=h[n];t=g(m,r);if(t){o.push(a(m)+(j?": ":":")+t)}}}}else{for(m in r){if(Object.prototype.hasOwnProperty.call(r,m)){t=g(m,r);if(t){o.push(a(m)+(j?": ":":")+t)}}}}t=o.length===0?"{}":j?"{\n"+j+o.join(",\n"+j)+"\n"+q+"}":"{"+o.join(",")+"}";j=q;
return t}}if(typeof JSON2.stringify!=="function"){JSON2.stringify=function(o,m,n){var f;j="";b="";if(typeof n==="number"){for(f=0;f<n;f+=1){b+=" "}}else{if(typeof n==="string"){b=n}}h=m;if(m&&typeof m!=="function"&&(typeof m!=="object"||typeof m.length!=="number")){throw new Error("JSON.stringify")}return g("",{"":o})}}if(typeof JSON2.parse!=="function"){JSON2.parse=function(o,f){var n;function m(s,r){var q,p,t=s[r];if(t&&typeof t==="object"){for(q in t){if(Object.prototype.hasOwnProperty.call(t,q)){p=m(t,q);if(p!==undefined){t[q]=p}else{delete t[q]}}}}return f.call(s,r,t)}o=String(o);c.lastIndex=0;if(c.test(o)){o=o.replace(c,function(p){return"\\u"+("0000"+p.charCodeAt(0).toString(16)).slice(-4)})}if((new RegExp("^[\\],:{}\\s]*$")).test(o.replace(new RegExp('\\\\(?:["\\\\/bfnrt]|u[0-9a-fA-F]{4})',"g"),"@").replace(new RegExp('"[^"\\\\\n\r]*"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?',"g"),"]").replace(new RegExp("(?:^|:|,)(?:\\s*\\[)+","g"),""))){n=eval("("+o+")");
return typeof f==="function"?m({"":n},""):n}throw new SyntaxError("JSON.parse")}}}());var _snaq=_snaq||[],SnowPlow=SnowPlow||(function(){var f,a={},p=document,c=navigator,A=screen,x=window,m=false,v=[],h=x.encodeURIComponent,w=x.decodeURIComponent,d=unescape,B,D;function r(i){return typeof i!=="undefined"}function n(i){return typeof i==="function"}function z(i){return typeof i==="object"}function j(i){return typeof i==="string"||i instanceof String}function G(){var L,N,M;for(L=0;L<arguments.length;L+=1){M=arguments[L];N=M.shift();if(j(N)){B[N].apply(B,M)}else{N.apply(B,M)}}}function J(N,M,L,i){if(N.addEventListener){N.addEventListener(M,L,i);return true}if(N.attachEvent){return N.attachEvent("on"+M,L)}N["on"+M]=L}function E(M,P){var L="",O,N;for(O in a){if(Object.prototype.hasOwnProperty.call(a,O)){N=a[O][M];if(n(N)){L+=N(P)}}}return L}function H(){var i;E("unload");if(f){do{i=new Date()}while(i.getTimeAlias()<f)}}function F(){var L;if(!m){m=true;E("load");for(L=0;L<v.length;L++){v[L]()
}}return true}function k(){var L;if(p.addEventListener){J(p,"DOMContentLoaded",function i(){p.removeEventListener("DOMContentLoaded",i,false);F()})}else{if(p.attachEvent){p.attachEvent("onreadystatechange",function i(){if(p.readyState==="complete"){p.detachEvent("onreadystatechange",i);F()}});if(p.documentElement.doScroll&&x===x.top){(function i(){if(!m){try{p.documentElement.doScroll("left")}catch(M){setTimeout(i,0);return}F()}}())}}}if((new RegExp("WebKit")).test(c.userAgent)){L=setInterval(function(){if(m||/loaded|complete/.test(p.readyState)){clearInterval(L);F()}},10)}J(x,"load",F,false)}function s(){var i="";try{i=x.top.document.referrer}catch(M){if(x.parent){try{i=x.parent.document.referrer}catch(L){i=""}}}if(i===""){i=p.referrer}return i}function g(i){var M=new RegExp("^([a-z]+):"),L=M.exec(i);return L?L[1]:null}function b(i){var M=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)"),L=M.exec(i);return L?L[1]:i}function y(M,L){var P=new RegExp("^(?:https?|ftp)(?::/*(?:[^?]+)[?])([^#]+)"),O=P.exec(M),N=new RegExp("(?:^|&)"+L+"=([^&]*)"),i=O?N.exec(O[1]):0;
return i?w(i[1]):""}function l(Q,N,M,P,L,O){var i;if(M){i=new Date();i.setTime(i.getTime()+M)}p.cookie=Q+"="+h(N)+(M?";expires="+i.toGMTString():"")+";path="+(P||"/")+(L?";domain="+L:"")+(O?";secure":"")}function e(M){var i=new RegExp("(^|;)[ ]*"+M+"=([^;]*)"),L=i.exec(p.cookie);return L?w(L[2]):0}function o(i){return d(h(i))}function I(ab){var N=function(W,i){return(W<<i)|(W>>>(32-i))},ac=function(ai){var ah="",ag,W;for(ag=7;ag>=0;ag--){W=(ai>>>(ag*4))&15;ah+=W.toString(16)}return ah},Q,ae,ad,M=[],U=1732584193,S=4023233417,R=2562383102,P=271733878,O=3285377520,aa,Z,Y,X,V,af,L,T=[];ab=o(ab);L=ab.length;for(ae=0;ae<L-3;ae+=4){ad=ab.charCodeAt(ae)<<24|ab.charCodeAt(ae+1)<<16|ab.charCodeAt(ae+2)<<8|ab.charCodeAt(ae+3);T.push(ad)}switch(L&3){case 0:ae=2147483648;break;case 1:ae=ab.charCodeAt(L-1)<<24|8388608;break;case 2:ae=ab.charCodeAt(L-2)<<24|ab.charCodeAt(L-1)<<16|32768;break;case 3:ae=ab.charCodeAt(L-3)<<24|ab.charCodeAt(L-2)<<16|ab.charCodeAt(L-1)<<8|128;break}T.push(ae);while((T.length&15)!==14){T.push(0)
}T.push(L>>>29);T.push((L<<3)&4294967295);for(Q=0;Q<T.length;Q+=16){for(ae=0;ae<16;ae++){M[ae]=T[Q+ae]}for(ae=16;ae<=79;ae++){M[ae]=N(M[ae-3]^M[ae-8]^M[ae-14]^M[ae-16],1)}aa=U;Z=S;Y=R;X=P;V=O;for(ae=0;ae<=19;ae++){af=(N(aa,5)+((Z&Y)|(~Z&X))+V+M[ae]+1518500249)&4294967295;V=X;X=Y;Y=N(Z,30);Z=aa;aa=af}for(ae=20;ae<=39;ae++){af=(N(aa,5)+(Z^Y^X)+V+M[ae]+1859775393)&4294967295;V=X;X=Y;Y=N(Z,30);Z=aa;aa=af}for(ae=40;ae<=59;ae++){af=(N(aa,5)+((Z&Y)|(Z&X)|(Y&X))+V+M[ae]+2400959708)&4294967295;V=X;X=Y;Y=N(Z,30);Z=aa;aa=af}for(ae=60;ae<=79;ae++){af=(N(aa,5)+(Z^Y^X)+V+M[ae]+3395469782)&4294967295;V=X;X=Y;Y=N(Z,30);Z=aa;aa=af}U=(U+aa)&4294967295;S=(S+Z)&4294967295;R=(R+Y)&4294967295;P=(P+X)&4294967295;O=(O+V)&4294967295}af=ac(U)+ac(S)+ac(R)+ac(P)+ac(O);return af.toLowerCase()}function C(M,i,L){if(M==="translate.googleusercontent.com"){if(L===""){L=i}i=y(i,"u");M=b(i)}else{if(M==="cc.bingj.com"||M==="webcache.googleusercontent.com"||M.slice(0,5)==="74.6."){i=p.links[0].href;M=b(i)}}return[M,i,L]}function t(L){var i=L.length;
if(L.charAt(--i)==="."){L=L.slice(0,i)}if(L.slice(0,2)==="*."){L=L.slice(1)}return L}function K(L){if(!j(L)){L=L.text||"";var i=p.getElementsByTagName("title");if(i&&r(i[0])){L=i[0].text}}return L}function u(aq){var au=C(p.domain,x.location.href,s()),ac=t(au[0]),ab=au[1],aL=au[2],P="GET",i=X(aq),a1="",aT,a0=p.title,al="7z|aac|ar[cj]|as[fx]|avi|bin|csv|deb|dmg|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|ms[ip]|od[bfgpst]|og[gv]|pdf|phps|png|ppt|qtm?|ra[mr]?|rpm|sea|sit|tar|t?bz2?|tgz|torrent|txt|wav|wm[av]|wpd||xls|xml|z|zip",aM=[ac],T=[],aN=[],aQ=[],af=500,O,ao,ar,aO="_sp_",Y,aJ,Q,ax,a2=63072000000,ai=1800000,ae=15768000000,V=window.navigator.userLanguage||window.navigator.language,aY=p.location.protocol==="https",aw={},aC=false,Z=false,ad,aW,az,aS=I,aH,an,aA;function aE(){return{transaction:{},items:[]}}function aU(a3){var a4;if(ar){a4=new RegExp("#.*");return a3.replace(a4,"")}return a3}function ak(a5,a3){var a6=g(a3),a4;if(a6){return a3}if(a3.slice(0,1)==="/"){return g(a5)+"://"+b(a5)+a3
}a5=aU(a5);if((a4=a5.indexOf("?"))>=0){a5=a5.slice(0,a4)}if((a4=a5.lastIndexOf("/"))!==a5.length-1){a5=a5.slice(0,a4+1)}return a5+a3}function aB(a6){var a4,a3,a5;for(a4=0;a4<aM.length;a4++){a3=t(aM[a4].toLowerCase());if(a6===a3){return true}if(a3.slice(0,1)==="."){if(a6===a3.slice(1)){return true}a5=a6.length-a3.length;if((a5>0)&&(a6.slice(a5)===a3)){return true}}}return false}function L(a3){var a4=new Image(1,1);a4.onload=function(){};a4.src=i+"?"+a3}function aV(a5,a4){var a3=new Date();if(!Q){L(a5);f=a3.getTime()+a4}}function U(a3){return aO+a3+"."+a1+"."+aH}function aF(){var a3=U("testcookie");if(!r(c.cookieEnabled)){l(a3,"1");return e(a3)==="1"?"1":"0"}return c.cookieEnabled?"1":"0"}function am(){aH=aS((Y||ac)+(aJ||"/")).slice(0,4)}function W(){var a3=new Date();ad=a3.getTime()}function R(a7,a4,a3,a6,a5){l(U("id"),a7+"."+a4+"."+a3+"."+a6+"."+a5,a2,aJ,Y,aY)}function S(){var a4=new Date(),a3=Math.round(a4.getTime()/1000),a6=e(U("id")),a5;if(a6){a5=a6.split(".");a5.unshift("0")}else{if(!an){an=aS((c.userAgent||"")+(c.platform||"")+JSON2.stringify(aw)+a3).slice(0,16)
}a5=["1",an,a3,0,a3,""]}return a5}function av(a4,bl){var bj,a3=new Date(),a9=Math.round(a3.getTime()/1000),bn,bk,a6,bf,bh,a8,a7,bi,a5=1024,bo,bb,be=U("id"),ba=U("ses"),bg=S(),bd=e(ba),bm=aT||ab,bc;if(Q){l(be,"",-1,aJ,Y);l(ba,"",-1,aJ,Y);return""}bn=bg[0];bk=bg[1];bf=bg[2];a6=bg[3];bh=bg[4];a8=bg[5];if(!bd){a6++;a8=bh}a4+="&tid="+String(Math.random()).slice(2,8)+"&uid="+bk+"&vid="+a6+(a1.length?"&aid="+h(a1):"")+"&lang="+V+(aL.length?"&refr="+h(aU(aL)):"");for(bj in aw){if(Object.prototype.hasOwnProperty.call(aw,bj)){bc=(bj==="res"||bj==="cookie")?"&":"&f_";a4+=bc+bj+"="+aw[bj]}}a4+="&url="+h(aU(window.location));R(bk,bf,a6,a9,a8);l(ba,"*",ai,aJ,Y,aY);a4+=E(bl);return a4}function aI(a3){return("https:"==document.location.protocol?"https":"http")+"://"+a3+"/ice.png"}function X(a3){return aI(a3+".cloudfront.net")}function aX(a3){var a4=a3||"";return{add:function(a5,a6){if(a6!==undefined&&a6!==""){a4+="&"+a5+"="+h(a6)}},build:function(){return a4}}}function aG(a5,a8,a3,a7,a6){var a4="ev_ca="+h(a5)+"&ev_ac="+h(a8);
if(String(a3).length){a4+="&ev_la="+h(a3)}if(String(a7).length){a4+="&ev_pr="+h(a7)}if(String(a6).length){a4+="&ev_va="+h(a6)}a4=av(a4,"event");aV(a4,af)}function ap(a7,a3,a5,a4){var a6="ad_ba="+h(a7);if(String(a3).length){a6+="&ad_ca="+h(a3)}if(String(a5).length){a6+="&ad_ad="+h(a5)}if(String(a4).length){a6+="&ad_uid="+h(a4)}a6=av(a6,configCustomData,"adimp");aV(a6,af)}function aK(a7,a6,bd,a8,a3,bb,a4,a5){var bc=aX();bc.add("tr_id",a7);bc.add("tr_af",a6);bc.add("tr_tt",bd);bc.add("tr_tx",a8);bc.add("tr_sh",a3);bc.add("tr_ci",bb);bc.add("tr_st",a4);bc.add("tr_co",a5);var a9=bc.build();var ba=av(a9,"ecommerceTransaction");aV(ba,af)}function N(a5,ba,a3,a4,a9,a7){var bb=aX();bb.add("ti_id",a5);bb.add("ti_sk",ba);bb.add("ti_na",a3);bb.add("ti_ca",a4);bb.add("ti_pr",a9);bb.add("ti_qu",a7);var a6=bb.build();var a8=av(a6,"ecommerceTransactionItem");aV(a8,af)}function M(a6){var a3=new Date(),a5=av("page="+h(K(a6||a0)),"log");aV(a5,af);if(O&&ao&&!Z){Z=true;J(p,"click",W);J(p,"mouseup",W);J(p,"mousedown",W);
J(p,"mousemove",W);J(p,"mousewheel",W);J(x,"DOMMouseScroll",W);J(x,"scroll",W);J(p,"keypress",W);J(p,"keydown",W);J(p,"keyup",W);J(x,"resize",W);J(x,"focus",W);J(x,"blur",W);ad=a3.getTime();setTimeout(function a4(){var a7=new Date(),a8;if((ad+ao)>a7.getTime()){if(O<a7.getTime()){a8=av("ping=1","ping");aV(a8,af)}setTimeout(a4,ao)}},ao)}}function aj(a4,a3){var a5=av(a3+"="+h(aU(a4)),"link");aV(a5,af)}function aP(a4,a3){if(a4!==""){return a4+a3.charAt(0).toUpperCase()+a3.slice(1)}return a3}function at(a8){var a7,a3,a6=["","webkit","ms","moz"],a5;if(!ax){for(a3=0;a3<a6.length;a3++){a5=a6[a3];if(Object.prototype.hasOwnProperty.call(p,aP(a5,"hidden"))){if(p[aP(a5,"visibilityState")]==="prerender"){a7=true}break}}}if(a7){J(p,a5+"visibilitychange",function a4(){p.removeEventListener(a5+"visibilitychange",a4,false);a8()});return}a8()}function aD(a5,a4){var a6,a3="(^| )(piwik[_-]"+a4;if(a5){for(a6=0;a6<a5.length;a6++){a3+="|"+a5[a6]}}a3+=")( |$)";return new RegExp(a3)}function aZ(a6,a3,a7){if(!a7){return"link"
}var a5=aD(aN,"download"),a4=aD(aQ,"link"),a8=new RegExp("\\.("+al+")([?&#]|$)","i");return a4.test(a6)?"link":(a5.test(a6)||a8.test(a3)?"download":0)}function aa(a8){var a6,a4,a3;while((a6=a8.parentNode)!==null&&r(a6)&&((a4=a8.tagName.toUpperCase())!=="A"&&a4!=="AREA")){a8=a6}if(r(a8.href)){var a9=a8.hostname||b(a8.href),ba=a9.toLowerCase(),a5=a8.href.replace(a9,ba),a7=new RegExp("^(javascript|vbscript|jscript|mocha|livescript|ecmascript|mailto):","i");if(!a7.test(a5)){a3=aZ(a8.className,a5,aB(ba));if(a3){a5=d(a5);aj(a5,a3)}}}}function ag(a3){var a4,a5;a3=a3||x.event;a4=a3.which||a3.button;a5=a3.target||a3.srcElement;if(a3.type==="click"){if(a5){aa(a5)}}else{if(a3.type==="mousedown"){if((a4===1||a4===2)&&a5){aW=a4;az=a5}else{aW=az=null}}else{if(a3.type==="mouseup"){if(a4===aW&&a5===az){aa(a5)}aW=az=null}}}}function aR(a4,a3){if(a3){J(a4,"mouseup",ag,false);J(a4,"mousedown",ag,false)}else{J(a4,"click",ag,false)}}function ay(a4){if(!aC){aC=true;var a5,a3=aD(T,"ignore"),a6=p.links;if(a6){for(a5=0;
a5<a6.length;a5++){if(!a3.test(a6[a5].className)){aR(a6[a5],a4)}}}}}function ah(){var a3,a4,a5={pdf:"application/pdf",qt:"video/quicktime",realp:"audio/x-pn-realaudio-plugin",wma:"application/x-mplayer2",dir:"application/x-director",fla:"application/x-shockwave-flash",java:"application/x-java-vm",gears:"application/x-googlegears",ag:"application/x-silverlight"};if(c.mimeTypes&&c.mimeTypes.length){for(a3 in a5){if(Object.prototype.hasOwnProperty.call(a5,a3)){a4=c.mimeTypes[a5[a3]];aw[a3]=(a4&&a4.enabledPlugin)?"1":"0"}}}if(typeof navigator.javaEnabled!=="unknown"&&r(c.javaEnabled)&&c.javaEnabled()){aw.java="1"}if(n(x.GearsFactory)){aw.gears="1"}aw.res=A.width+"x"+A.height;aw.cookie=aF()}ah();am();aA=aE();return{getVisitorId:function(){return(S())[1]},getVisitorInfo:function(){return S()},setSiteId:function(a3){a1=a3},setLinkTrackingTimer:function(a3){af=a3},setDownloadExtensions:function(a3){al=a3},addDownloadExtensions:function(a3){al+="|"+a3},setDomains:function(a3){aM=j(a3)?[a3]:a3;aM.push(ac)
},setIgnoreClasses:function(a3){T=j(a3)?[a3]:a3},setReferrerUrl:function(a3){aL=a3},setCustomUrl:function(a3){aT=ak(ab,a3)},setDocumentTitle:function(a3){a0=a3},setDownloadClasses:function(a3){aN=j(a3)?[a3]:a3},setLinkClasses:function(a3){aQ=j(a3)?[a3]:a3},discardHashTag:function(a3){ar=a3},setCookieNamePrefix:function(a3){aO=a3},setCookieDomain:function(a3){Y=t(a3);am()},setCookiePath:function(a3){aJ=a3;am()},setVisitorCookieTimeout:function(a3){a2=a3*1000},setSessionCookieTimeout:function(a3){ai=a3*1000},setReferralCookieTimeout:function(a3){ae=a3*1000},setDoNotTrack:function(a4){var a3=c.doNotTrack||c.msDoNotTrack;Q=a4&&(a3==="yes"||a3==="1")},addListener:function(a4,a3){aR(a4,a3)},enableLinkTracking:function(a3){if(m){ay(a3)}else{v.push(function(){ay(a3)})}},setHeartBeatTimer:function(a5,a4){var a3=new Date();O=a3.getTime()+a5*1000;ao=a4*1000},killFrame:function(){if(x.location!==x.top.location){x.top.location=x.location}},redirectFile:function(a3){if(x.location.protocol==="file:"){x.location=a3
}},setCountPreRendered:function(a3){ax=a3},trackLink:function(a4,a3){at(function(){aj(a4,a3)})},trackPageView:function(a3){at(function(){M(a3)})},setAccount:function(a3){i=X(a3)},setCollectorUrl:function(a3){i=aI(a3)},trackEvent:function(a4,a7,a3,a6,a5){aG(a4,a7,a3,a6,a5)},trackImpression:function(a6,a3,a5,a4){ap(a6,a3,a5,a4)},addTrans:function(a3,a6,a7,a5,a4,ba,a8,a9){aA.transaction={orderId:a3,affiliation:a6,total:a7,tax:a5,shipping:a4,city:ba,state:a8,country:a9}},addItem:function(a3,a8,a4,a6,a5,a7){aA.items.push({orderId:a3,sku:a8,name:a4,category:a6,price:a5,quantity:a7})},trackTrans:function(){aK(aA.transaction.orderId,aA.transaction.affiliation,aA.transaction.total,aA.transaction.tax,aA.transaction.shipping,aA.transaction.city,aA.transaction.state,aA.transaction.country);aA.items.forEach(function(a3){N(a3.orderId,a3.sku,a3.name,a3.category,a3.price,a3.quantity)});aA=aE()}}}function q(){return{push:G}}J(x,"beforeunload",H,false);k();Date.prototype.getTimeAlias=Date.prototype.getTime;
B=new u();for(D=0;D<_snaq.length;D++){G(_snaq[D])}_snaq=new q();return{addPlugin:function(i,L){a[i]=L},getTracker:function(i){return new u(i)},getAsyncTracker:function(){return B}}}());